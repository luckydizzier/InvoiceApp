<Window x:Class="InvoiceApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:InvoiceApp.Views"
        xmlns:helpers="clr-namespace:InvoiceApp.Helpers"
        mc:Ignorable="d"
        Title="SzÃ¡mlakezelÅ‘" MinHeight="600" MinWidth="1000">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <DataTemplate x:Key="MainWindowTemplate">
            <Grid helpers:FocusBehavior.IsFocused="{Binding InvoiceViewModel.IsInvoiceListFocused}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Menu Grid.Row="0" Grid.ColumnSpan="2">
                    <MenuItem Header="_Ablakok">
                        <MenuItem Header="_FizetÃ©si mÃ³dok" Command="{Binding ShowPaymentMethodsCommand}" />
                        <MenuItem Header="_SzÃ¡llÃ­tÃ³k" Command="{Binding ShowSuppliersCommand}" />
                        <MenuItem Header="_TermÃ©kcsoportok" Command="{Binding ShowProductGroupsCommand}" />
                        <MenuItem Header="_Ãfakulcsok" Command="{Binding ShowTaxRatesCommand}" />
                        <MenuItem Header="_TermÃ©kek" Command="{Binding ShowProductsCommand}" />
                        <MenuItem Header="_EgysÃ©gek" Command="{Binding ShowUnitsCommand}" />
                    </MenuItem>
                </Menu>
                <StackPanel Grid.Row="1" Grid.Column="0" Margin="4">
                    <Button Content="ðŸ†• Ãšj szÃ¡mla" Command="{Binding InvoiceViewModel.NewInvoiceCommand}" Style="{StaticResource IconButtonStyle}" Margin="0,0,0,4"/>
                    <ListView x:Name="InvoicesList"
                              ItemsSource="{Binding InvoiceViewModel.Invoices}"
                              SelectedItem="{Binding InvoiceViewModel.SelectedInvoice}"
                              ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Number}" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Date, StringFormat='{}{0:d}'}" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Supplier.Name}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
                <Grid Grid.Row="1" Grid.Column="1" Margin="4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <views:InvoiceItemDataGrid x:Name="ItemsGrid" Grid.Row="1" Margin="0,0,0,4" />
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,4">
                        <views:InvoiceHeaderView />
                        <Button Content="âž• SzÃ¡llÃ­tÃ³" Command="{Binding InvoiceViewModel.AddSupplierCommand}" Style="{StaticResource IconButtonStyle}" Margin="8,0,0,0" />
                    </StackPanel>
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="âž• TÃ©tel hozzÃ¡adÃ¡sa" Command="{Binding InvoiceViewModel.AddItemCommand}" Style="{StaticResource IconButtonStyle}"/>
                        <Button Content="ðŸ—‘ï¸ TÃ©tel tÃ¶rlÃ©se" Command="{Binding InvoiceViewModel.RemoveItemCommand}" Style="{StaticResource IconButtonStyle}"/>
                        <Button Content="ðŸ’¾ MentÃ©s" Command="{Binding InvoiceViewModel.SaveCommand}" Style="{StaticResource IconButtonStyle}"/>
                    </StackPanel>
                    <views:InvoiceSummaryPanel Grid.Row="3" />
                </Grid>
                <StatusBar Grid.Row="2" Grid.ColumnSpan="2">
                    <TextBlock Text="{Binding InvoiceViewModel.StatusMessage}" />
                </StatusBar>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="PaymentMethodViewTemplate">
            <views:PaymentMethodView />
        </DataTemplate>
        <DataTemplate x:Key="SupplierTemplate">
            <views:SupplierView />
        </DataTemplate>
        <DataTemplate x:Key="ProductGroupTemplate">
            <views:ProductGroupView />
        </DataTemplate>
        <DataTemplate x:Key="TaxRateTemplate">
            <views:TaxRateView />
        </DataTemplate>
        <DataTemplate x:Key="UnitTemplate">
            <views:UnitView />
        </DataTemplate>
        <DataTemplate x:Key="ProductViewTemplate">
            <views:ProductView />
        </DataTemplate>
        <DataTemplate x:Key="DashboardTemplate">
            <views:DashboardView />
        </DataTemplate>
        <DataTemplate x:Key="InvoiceListTemplate">
            <views:InvoiceListView />
        </DataTemplate>
        <DataTemplate x:Key="InvoiceEditorTemplate">
            <views:InvoiceEditorView />
        </DataTemplate>
        <DataTemplate x:Key="InvoiceHeaderTemplate">
            <views:InvoiceHeaderView />
        </DataTemplate>
        <DataTemplate x:Key="InvoiceItemsTemplate">
            <views:InvoiceItemDataGrid />
        </DataTemplate>
        <DataTemplate x:Key="InvoiceSummaryTemplate">
            <views:InvoiceSummaryPanel />
        </DataTemplate>
        <DataTemplate x:Key="ConfirmDialogTemplate">
            <views:ConfirmDialog />
        </DataTemplate>
        <helpers:AppStateTemplateSelector x:Key="StateSelector"
                                          MainWindowTemplate="{StaticResource MainWindowTemplate}"
                                          PaymentMethodViewTemplate="{StaticResource PaymentMethodViewTemplate}"
                                          SupplierTemplate="{StaticResource SupplierTemplate}"
                                          ProductGroupTemplate="{StaticResource ProductGroupTemplate}"
                                          TaxRateTemplate="{StaticResource TaxRateTemplate}"
                                          UnitTemplate="{StaticResource UnitTemplate}"
                                          ProductViewTemplate="{StaticResource ProductViewTemplate}"
                                          DashboardTemplate="{StaticResource DashboardTemplate}"
                                          InvoiceListTemplate="{StaticResource InvoiceListTemplate}"
                                          InvoiceEditorTemplate="{StaticResource InvoiceEditorTemplate}"
                                          InvoiceHeaderTemplate="{StaticResource InvoiceHeaderTemplate}"
                                          InvoiceItemsTemplate="{StaticResource InvoiceItemsTemplate}"
                                          InvoiceSummaryTemplate="{StaticResource InvoiceSummaryTemplate}"
                                          ConfirmDialogTemplate="{StaticResource ConfirmDialogTemplate}" />
    </Window.Resources>
    <Window.InputBindings>
        <KeyBinding Key="Up" Command="{Binding NavigateUpCommand}"/>
        <KeyBinding Key="Down" Command="{Binding NavigateDownCommand}"/>
        <KeyBinding Key="Enter" Command="{Binding EnterCommand}"/>
        <KeyBinding Key="Escape" Command="{Binding BackCommand}"/>
        <KeyBinding Key="Delete" Command="{Binding DeleteInvoiceCommand}"/>
        <KeyBinding Key="F1" Command="{Binding ShowDashboardCommand}"/>
        <KeyBinding Key="F2" Command="{Binding ShowInvoiceListCommand}"/>
        <KeyBinding Key="F3" Command="{Binding StartInvoiceEditorCommand}"/>
        <KeyBinding Key="F4" Command="{Binding ShowPaymentMethodsCommand}"/>
        <KeyBinding Key="F5" Command="{Binding ShowSuppliersCommand}"/>
        <KeyBinding Key="F6" Command="{Binding ShowProductGroupsCommand}"/>
        <KeyBinding Key="F7" Command="{Binding ShowTaxRatesCommand}"/>
        <KeyBinding Key="F8" Command="{Binding ShowUnitsCommand}"/>
        <KeyBinding Key="F12" Command="{Binding ShowInvoicesCommand}"/>
    </Window.InputBindings>
    <ContentControl x:Name="StateRegion"
                    Content="{Binding CurrentState}"
                    ContentTemplateSelector="{StaticResource StateSelector}" />
</Window>
